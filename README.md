# The Rig

### An LLM-powered code generation framework that executes code as it builds

**WARNING: Use this sucker at your own risk - you are running arbitrary code without supervision generated by a drunken robot genius toddler.**

The Rig is a distributed LLM-powered code generation framework that seeks to address issues in code generation when the proposed code appears to be functional but is not actually functional. It does this by executing the generated code as it is being revised on individual Rigs, and providing feedback from the stderr back to the Core as part of the request for a subsequent revision.

The framework consists of the Core, which is the central code generation component relying on a single instance of an LLM (currently mistral-7b-instruct-v0.2 due to the 32k context size), and Rigs, which are individual nodes seeking to generate a complete application for either .NET 8, Python 3.9 or Python 3.12.

The recommended process for using the framework is as follows:

1. Clone the repo to a main Windows machine with access to one or more GPUs and CUDA
2. Adjust config.json to reflect the correct "core_url" value (usually you should just change the IP)
3. Ensure that Python 3.12 is installed, and then run "install.bat"
4. Run one of the provided batch files "core_run_gpu0.bat" / "core_run_gpu1.bat" to start the Core
5. Create a Debian VM and clone the repo there as well
6. Install .NET 8, Python 3.9 or Python 3.12 in the VM based on your needs
7. Go into the base_templates directory and select the appropriate subdirectory
8. Inside that subdirectory, modify only "prompt.txt" to describe the application you want to have built
9. Adjust config.json to reflect the correct "core_url" value to match what was configured above
10. Now, in the main directory, run "rig_dotnet8_linux_run.sh" (or the other "_run.sh" files as needed)
11. You can rinse and repeat for each additional Rig

At this point, each Rig will interface with the core and incrementally generate a complete application based on your prompt.txt. Generally speaking, these are the steps taken:

1. The Rig will initialize a git repo in the relevant template subdirectory
2. The Rig will execute the current code in a subprocess and retrieve the stderr output
3. The Rig will submit the current code and stderr output to the core, requesting a code revision based on your prompt.txt
4. After receiving the new revision, the Rig will replace the existing code and commit
5. Then, the Rig will submit the revised code along with either the requirements.txt (for Python) or packages.config (for .NET 8), requesting a revision of that as well.
6. The Rig will replace the existing file contents with the provided revision and commit
7. The process will repeat indefinitely, alternating between creative and conservative revisions

Initial tests are promising, although it looks like it may still benefit from a supervisory revision at some point in the process to avoid problematic loops in solutions (fix by removing what you then add to fix ad nauseum).